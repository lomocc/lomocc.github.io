---
title: Linux
tag: devops
---
# Linux 相关

## 在 CentOS 7 中升级内核

```sh
# 载入公钥
rpm --import https://www.elrepo.org/RPM-GPG-KEY-elrepo.org
# 安装 elrepo
rpm -Uvh http://www.elrepo.org/elrepo-release-7.0-3.el7.elrepo.noarch.rpm
yum --disablerepo=\* --enablerepo=elrepo-kernel repolist
yum --disablerepo=\* --enablerepo=elrepo-kernel list kernel*
# 安装新版内核
yum --disablerepo=\* --enablerepo=elrepo-kernel install -y kernel-ml.x86_64
```

```sh
# 安装新版内核工具
yum remove kernel-tools-libs.x86_64 kernel-tools.x86_64
yum --disablerepo=\* --enablerepo=elrepo-kernel install -y kernel-ml-tools.x86_64
```

## 开机自动选择上次选择的版本

编辑 `/etc/default/grub`:

```sh
GRUB_DEFAULT=saved
GRUB_SAVEDEFAULT=true
```

刷新配置

```sh
grub2-mkconfig -o /boot/grub2/grub.cfg
```
